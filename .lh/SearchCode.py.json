{
    "sourceFile": "SearchCode.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1713409630948,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1713410866681,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,13 @@\n import sqlite3\r\n import os\r\n \r\n # 连接到SQLite数据库\r\n-conn = sqlite3.connect('yy-OrgCodeNote_my_database.db')\r\n+conn = sqlite3.connect('yy_OrgCodeNote_my_database.db')\r\n cursor = conn.cursor()\r\n \r\n # 遍历数据库中的所有id\r\n-cursor.execute(\"SELECT id, location, find FROM yy-OrgCodeNote_table\")  # 请替换your_table_name为你的表名\r\n+cursor.execute(\"SELECT id, location, find FROM yy_OrgCodeNote_table\")  # 请替换your_table_name为你的表名\r\n rows = cursor.fetchall()\r\n \r\n for row in rows:\r\n     id, location, find_text = row\r\n@@ -26,9 +26,9 @@\n                         break\r\n \r\n     # 更新code_num属性\r\n     if code_num is not None:\r\n-        cursor.execute(\"UPDATE yy-OrgCodeNote_table SET code_num = ? WHERE id = ?\", (code_num, id))\r\n+        cursor.execute(\"UPDATE yy_OrgCodeNote_table SET code_num = ? WHERE id = ?\", (code_num, id))\r\n \r\n # 提交更改并关闭连接\r\n conn.commit()\r\n conn.close()\n\\ No newline at end of file\n"
                }
            ],
            "date": 1713409630948,
            "name": "Commit-0",
            "content": "import sqlite3\r\nimport os\r\n\r\n# 连接到SQLite数据库\r\nconn = sqlite3.connect('yy-OrgCodeNote_my_database.db')\r\ncursor = conn.cursor()\r\n\r\n# 遍历数据库中的所有id\r\ncursor.execute(\"SELECT id, location, find FROM yy-OrgCodeNote_table\")  # 请替换your_table_name为你的表名\r\nrows = cursor.fetchall()\r\n\r\nfor row in rows:\r\n    id, location, find_text = row\r\n    code_num = None\r\n\r\n    # 检查find属性是否为纯数字\r\n    if find_text.isdigit():\r\n        code_num = int(find_text)\r\n    else:\r\n        # 检查文件中是否包含find属性的文字\r\n        if os.path.exists(location):\r\n            with open(location, 'r', encoding='utf-8') as file:\r\n                for i, line in enumerate(file, 1):\r\n                    if find_text in line:\r\n                        code_num = i\r\n                        break\r\n\r\n    # 更新code_num属性\r\n    if code_num is not None:\r\n        cursor.execute(\"UPDATE yy-OrgCodeNote_table SET code_num = ? WHERE id = ?\", (code_num, id))\r\n\r\n# 提交更改并关闭连接\r\nconn.commit()\r\nconn.close()"
        }
    ]
}